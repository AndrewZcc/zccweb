{% extends 'base.html' %}

{% block title %}编辑文档{% endblock %}

{% block link %}
    <link rel="stylesheet" href="{{ url_for('static', filename='editormd/css/editormd.css') }}" />
{% endblock %}

{% block content %}
<div class="form-container">
    <h3 style="text-align: center;">编辑文档</h3>
    <div class="form-group">
        <label for="title">标题</label>
        <p class="title">{{ doctitle }}</p>
    </div>
	<form action="{{ url_for('main.edit_doc', cat_id= catid, poetry_id= docid) }}" method="POST" enctype="multipart/form-data">
		<label for="mkinput">请编辑文档内容 (markdown 格式)</label>
		<div class="form-group" id="my-editor-md">
		<textarea name="updateContent" id="mkinput" rows="30" class="form-control" placeholder="文档内容">{{ doccontent }}</textarea>
		</div>
		<div class="form-group" style="float: left;">
		<button type="submit" class="btn btn-success">确认修改</button>
		</div>
	</form>
	<form action="{{ url_for('main.edit_doc', cat_id= catid, poetry_id= docid) }}" method="POST" style="float: left; padding-left: 10px">
		<div class="form-group">
		<button type="submit" class="btn btn-primary">放弃修改</button>
		</div>
	</form>
</div>
{% endblock %}

{% block jsscript %}
    <script src="{{ url_for('static', filename='editormd/editormd.min.js') }}"></script>
    <script type="text/javascript">
        var sidebar = document.getElementsByClassName("sidebar")[0];

        $(function() {
            var editor = editormd("my-editor-md", {
                width  : "100%",
                height : 650,
                path   : "/static/editormd/lib/",
                onfullscreen : function() {
                    //alert("onfullscreen");
                    sidebar.style.display = "none";
                },
                onfullscreenExit : function () {

                    sidebar.style.display = "";
                }
            });
        });
    </script>
{% endblock %}